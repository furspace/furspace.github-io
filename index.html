<!DOCTYPE html>
<html lang="en" xml:lang="en">
    <head>
        <title>Furspace</title> 
        <link rel="icon" href="img/icons/FurLogoBlue.svg" type="image/svg"/>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <nav>
            <!-- Header Bar -->
            <ul class="headerBar topBar">
                <li class="navbarItem"><img src="img/icons/FurLogoWhite.svg" class="logo"></li>
                <li class="home navbarItem"><a href="index.html" class="homeLink">furspace.blog</a></li>
                <li class="navbarItem"><a class="tagline">a space for furs</a></li>
                <li class="navbarItem searchContainer"><span><em id="searchbar">Search...</em><button class="searchButton">Go</button></span></li>
            </ul>
            <!-- Main Navbar -->
            <div class="mainNavbar topBar">
                <li class="navbarItem"><a href="">Home</a></li>
                <li class="navbarItem"><a href="">About</a></li>
                <li class="navbarItem" style="float:right"><a href="">Sign Up</a></li>
                <li class="navbarItem" style="float:right"><a href="">Log In</a></li>
            </div>
            <br>
        </nav>
        <div class="row">
            <aside>
                <!-- Bio Table -->
                <table class="bioTable topBio">
                    <tr>
                        <td id="bioName"><h1>Wellsley</h1></td>
                        <td id="bioStatus">My STATUS!!</td>
                    </tr>
                    <tr>
                        <td><img src="./img/icons/users/wells.jpg" width="200px" height="200px" alt="icon" id="bioIcon"></td>
                        <td id="bioIntro">
                            <ul class="bioIntroItem">
                                <li class="bioIntroItem">he/him</li>
                                <li class="bioIntroItem">20 y/o nerd</li>
                                <li class="bioIntroItem">Worcester, MA</li>
                            </ul>
                        </td>
                    </tr>
                </table>
                <br>
                <!-- Utilities Box -->
                <table class="bioTable middleBio">
                    <tr>
                        <th colspan="2" class="tableHeader">Contacting Wellsley</th>
                    </tr>
                    <tr>
                        <td>Send Message</td>
                        <td>Block User</td>
                    </tr>
                    <tr>
                        <td>Add to Friends</td>
                        <td>Add to Favorites</td>
                    </tr>
                </table>
                <br>
                <!-- Music Container -->
                <div id="musicContainer">
                    <span id="musicButton"><button>ll</button></span>
                    <div id="musicPlayer">Loading...</div>
                </div>
                <br>
                <!-- Interests Table -->
                <table class="bioTable bottomBio">
                    <tr>
                        <th colspan="2" class="tableHeader">Wellsley's Interests</th>
                    </tr>
                    <tr>
                        <td><strong>General</strong></td>
                        <td>computer</td>
                    </tr>
                    <tr>
                        <td><strong>Music</strong></td>
                        <td>electronica, trance, classical, heavy-metal-synth, breakcore, IDM</td>
                    </tr>
                    <tr>
                        <td><strong>Movies</strong></td>
                        <td>brave little toaster to the rescue</td>
                    </tr>
                    <tr>
                        <td><strong>Television</strong></td>
                        <td>bluey</td>
                    </tr>
                    <tr>
                        <td><strong>Books</strong></td>
                        <td>wind in the willows</td>
                    </tr>
                    <tr>
                        <td><strong>Heroes</strong></td>
                        <td>idk man</td>
                    </tr>
                </table>
            </aside>
            <main class="row-7">
                <div>
                    <!-- Profile Table -->
                    <table class="profileTable">
                        <tr class="orangeTableHeader">
                            <th>About</th>
                        </tr>
                        <tr>
                            <td>nerdy queer engineer yote</td>
                        </tr>
                        <tr class="orangeTableHeader">
                            <th>Who I'd Like to Meet</th>
                        </tr>
                        <tr>
                            <td>nerds and fellow animal people</td>
                        </tr>
                    </table>
                    <br>
                    <!-- Posts Container -->
                    <div class="postsContainer">
                        <table class="profileTable" id="pt">
                            <tr>
                                <td colspan="2" class="orangeTableHeader">Wellsley's Blog Entries</td>
                            </tr>
                            <tbody id="postsContainer">
                                <!-- Posts will be populated here by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    <script type="module">
                        export const posts = [
                            {
                                "date": "May 2005",
                                "author": "Wellsley",
                                "icon": "./img/icons/users/wells.jpg",
                                "image": "./img/posts/1.jpg",
                                "body": "the yapper",
                                "comments": [
                                    {
                                        "author": "Xavier",
                                        "icon": "./img/icons/users/opal.jpg",
                                        "text": "hi"
                                    }
                                ]
                            },
                            {
                                "date": "May 2005",
                                "author": "Wellsley",
                                "icon": "./img/icons/users/wells.jpg",
                                "image": "./img/posts/1.jpg",
                                "body": "the yapper",
                                "comments": [
                                    {
                                        "author": "Xavier",
                                        "icon": "./img/icons/users/opal.jpg",
                                        "text": "hi"
                                    }
                                ]
                            }
                        ];

                        const postsContainer = document.getElementById('postsContainer');

                        posts.forEach(post => {
                            const postRow = document.createElement('tr');
                            postRow.innerHTML = `
                                <td colspan="2">
                                    <span class="postAuthor">
                                        <img src="${post.icon}" width=55px height=55px alt="author" class="friendIcon">
                                        <div class="postAuthorText">
                                            <strong>${post.author}</strong>
                                            <span class="postDate"><em>${post.date}</em></span>
                                        </div>
                                    </span>
                                </td>
                            `;
                            postsContainer.appendChild(postRow);

                            const imageRow = document.createElement('tr');
                            imageRow.innerHTML = `
                                <td colspan="2">
                                    <img src="${post.image}" alt="post image" class="postImage">
                                </td>
                            `;
                            postsContainer.appendChild(imageRow);

                            const bodyRow = document.createElement('tr');
                            bodyRow.innerHTML = `
                                <td colspan="2">${post.body}</td>
                            `;
                            postsContainer.appendChild(bodyRow);

                            const commentsRow = document.createElement('tr');
                            commentsRow.innerHTML = `
                                <td colspan="2">
                                    <strong>Comments</strong>
                                    <input type="button" onclick="commentsDropdown(this)" class="comments-dropdown" value="▼"></input>
                                </td>
                            `;
                            postsContainer.appendChild(commentsRow);

                            const commentsSection = document.createElement('tbody');
                            commentsSection.className = "commentSection";
                            commentsSection.style.display = "none";
                            post.comments.forEach(comment => {
                                const commentRow = document.createElement('tr');
                                commentRow.innerHTML = `
                                    <td width="0%"><img src="${comment.icon}" width=50px height=50px alt="friend" class="friendIcon"></td>
                                    <td class="comment-body">
                                        <strong>${comment.author}:</strong>
                                        <br>
                                        ${comment.text}
                                    </td>
                                `;
                                commentsSection.appendChild(commentRow);
                            });
                            postsContainer.appendChild(commentsSection);

                            const postBreak = document.createElement('tr');
                            postBreak.innerHTML = `
                                <td colspan="2">
                                    <hr class="postBreak">
                                </td>
                            `;
                            postsContainer.appendChild(postBreak);
                        });

                        window.commentsDropdown = function(element) {
                            if (element.value == "▼") {
                                element.value = "▲";
                                let c = element.parentElement.parentElement.nextElementSibling;
                                if (c) {
                                    c.style.display = "table-row-group";
                                }
                            } else if (element.value == "▲") {
                                element.value = "▼";
                                let c = element.parentElement.parentElement.nextElementSibling;
                                if (c) {
                                    c.style.display = "none";
                                }
                            }
                        }
                    </script>
                </div>
            </main>
        </div>
        <hr>
        <footer>FurSpace &#169; 2005<br></footer>
    </body>
</html>